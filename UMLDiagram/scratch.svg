<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1492px" preserveAspectRatio="none" style="width:4321px;height:1492px;background:#FFFFFF;" version="1.1" viewBox="0 0 4321 1492" width="4321px" zoomAndPan="magnify"><defs/><g><!--MD5=[10ea673caf457862023e152271927b45]
cluster controller--><g id="cluster_controller"><path d="M1405.5,117 L1475.5,117 A3.75,3.75 0 0 1 1478,119.5 L1485,142.9404 L2550.5,142.9404 A2.5,2.5 0 0 1 2553,145.4404 L2553,528.5 A2.5,2.5 0 0 1 2550.5,531 L1405.5,531 A2.5,2.5 0 0 1 1403,528.5 L1403,119.5 A2.5,2.5 0 0 1 1405.5,117 " fill="#DDDDDD" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1403" x2="1485" y1="142.9404" y2="142.9404"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="69" x="1407" y="135.8643">controller</text></g><!--MD5=[5d01a4fb3d7f8f6d1869baf630d30202]
cluster object--><g id="cluster_object"><path d="M2098.5,555 L2143.5,555 A3.75,3.75 0 0 1 2146,557.5 L2153,580.9404 L2807.5,580.9404 A2.5,2.5 0 0 1 2810,583.4404 L2810,953.5 A2.5,2.5 0 0 1 2807.5,956 L2098.5,956 A2.5,2.5 0 0 1 2096,953.5 L2096,557.5 A2.5,2.5 0 0 1 2098.5,555 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="2096" x2="2153" y1="580.9404" y2="580.9404"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="44" x="2100" y="573.8643">object</text></g><!--MD5=[cb643d2e99e3f88089b3a75eeb15303b]
cluster command--><g id="cluster_command"><path d="M8.5,980 L76.5,980 A3.75,3.75 0 0 1 79,982.5 L86,1005.9404 L3528.5,1005.9404 A2.5,2.5 0 0 1 3531,1008.4404 L3531,1482.5 A2.5,2.5 0 0 1 3528.5,1485 L8.5,1485 A2.5,2.5 0 0 1 6,1482.5 L6,982.5 A2.5,2.5 0 0 1 8.5,980 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="86" y1="1005.9404" y2="1005.9404"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="67" x="10" y="998.8643">command</text></g><!--MD5=[11f03a07a4422c8eb8f650dbf201ac41]
cluster exception--><g id="cluster_exception"><path d="M3565.5,676.5 L3636.5,676.5 A3.75,3.75 0 0 1 3639,679 L3646,702.4404 L4311.5,702.4404 A2.5,2.5 0 0 1 4314,704.9404 L4314,1185 A2.5,2.5 0 0 1 4311.5,1187.5 L3565.5,1187.5 A2.5,2.5 0 0 1 3563,1185 L3563,679 A2.5,2.5 0 0 1 3565.5,676.5 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="3563" x2="3646" y1="702.4404" y2="702.4404"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="70" x="3567" y="695.3643">exception</text></g><!--MD5=[1681db427d861294dc4bf59cd2c200d7]
class Library--><g id="elem_Library"><rect codeLine="8" fill="#F1F1F1" height="227.4639" id="Library" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="415" x="1685.5" y="157.5"/><ellipse cx="1866.75" cy="173.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1870.875,177.4531 Q1870.5156,178.0781 1869.6719,178.7188 Q1868.2656,179.7344 1865.5313,179.7344 Q1863.3438,179.7344 1861.875,178.2656 Q1860.1719,176.5625 1860.1719,173.375 Q1860.1719,170.4375 1861.8594,168.6406 Q1863.4063,167.0156 1865.625,167.0156 Q1867.5,167.0156 1868.4844,167.3125 Q1869.4688,167.6094 1869.4688,167.6094 Q1869.4688,167.6094 1869.4688,167.0469 L1870.4844,166.9531 L1870.6406,171.0156 L1869.3125,171.1406 Q1868.5,167.5469 1865.7656,167.5469 Q1865.7656,167.5469 1865.1719,167.8281 Q1864.2656,168.1719 1863.75,168.7188 Q1862.375,170.2656 1862.3594,173.4063 Q1862.3438,176.1875 1863.875,177.75 Q1865.1719,179.0781 1866,179.0781 Q1868.0313,179.0781 1870.2188,176.5156 L1870.875,177.4531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="1887.25" y="180.394">Library</text><line style="stroke:#181818;stroke-width:0.5;" x1="1686.5" x2="2099.5" y1="189.5" y2="189.5"/><ellipse cx="1696.5" cy="204.9702" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196" x="1705.5" y="210.3643">users : HashMap&lt;String, User&gt;</text><ellipse cx="1696.5" cy="224.9106" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="251" x="1705.5" y="230.3047">books : LinkedHashMap&lt;Integer, Book&gt;</text><ellipse cx="1696.5" cy="244.8511" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="280" x="1705.5" y="250.2451">commandErrorList : HashMap&lt;String,String&gt;</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1693.5" y="261.7915"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="109" x="1705.5" y="270.1855">instance : Library</text><ellipse cx="1696.5" cy="284.7319" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="1705.5" y="290.126">br : BufferedReader</text><line style="stroke:#181818;stroke-width:0.5;" x1="1686.5" x2="2099.5" y1="297.2021" y2="297.2021"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="1705.5" y="318.0664">«Singleton»</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1693.5" y="329.6128"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="1705.5" y="338.0068">Library()</text><ellipse cx="1696.5" cy="352.5532" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="139" x="1705.5" y="357.9473">getInstance() : Library</text><ellipse cx="1696.5" cy="372.4937" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="389" x="1705.5" y="377.8877">processTransaction(cmdStr : String, br : BufferedReader) : int</text></g><g id="elem_GMN8"><path d="M1419.5,238 L1419.5,303.5483 A0,0 0 0 0 1419.5,303.5483 L1650.5,303.5483 A0,0 0 0 0 1650.5,303.5483 L1650.5,275 L1685.26,271 L1650.5,267 L1650.5,248 L1640.5,238 L1419.5,238 A0,0 0 0 0 1419.5,238 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1640.5,238 L1640.5,248 L1650.5,248 L1640.5,238 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="1425.5" y="258.6597">透過Map可利用鍵快速查找元素</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="1425.5" y="277.1758">LinkedHashMap有可預知的迭代順序</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="1425.5" y="295.6919">解決列出書要照ID排的問題</text></g><g id="elem_GMN11"><path d="M1419,448 L1419,513.5483 A0,0 0 0 0 1419,513.5483 L1661,513.5483 A0,0 0 0 0 1661,513.5483 L1661,458 L1651,448 L1598.49,448 L1702.04,384.52 L1590.49,448 L1419,448 A0,0 0 0 0 1419,448 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1651,448 L1651,458 L1661,458 L1651,448 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="1425" y="468.6597">processTransaction方法用來</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="1425" y="487.1758">拆分輸入的指令，呼叫工廠構造指令類</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="1425" y="505.6919">並使用設計好的命令模式執行指令</text></g><g id="elem_GMN14"><path d="M2135.5,155 L2135.5,267 L2100.66,271 L2135.5,275 L2135.5,387.1934 A0,0 0 0 0 2135.5,387.1934 L2536.5,387.1934 A0,0 0 0 0 2536.5,387.1934 L2536.5,165 L2526.5,155 L2135.5,155 A0,0 0 0 0 2135.5,155 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M2526.5,155 L2526.5,165 L2536.5,165 L2526.5,155 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="2141.5" y="175.6597">關於processTransaction函數</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="2141.5" y="194.1758">Analyze a single command,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232" x="2141.5" y="212.6919">where the supported command format is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="2141.5" y="231.208"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="2141.5" y="249.7241">[invoker] command [...parameters].</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="2141.5" y="268.2402"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="348" x="2141.5" y="286.7563">Therefore, the standard processing can be applied uniformly.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="338" x="2141.5" y="305.2725">If the invoker has the permission to execute the command,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331" x="2141.5" y="323.7886">the command execution is handled by the invoking class.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="2141.5" y="342.3047"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="380" x="2141.5" y="360.8208">@param cmdStr : a single line instruction which the type is String</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="2141.5" y="379.3369">@return  0 if run successfully, -1 if parsing failed.</text></g><!--MD5=[a740f37e8f29cb9a205a38b6bf6d2bd8]
class CommandFactory--><g id="elem_CommandFactory"><rect codeLine="24" fill="#F1F1F1" height="67.9404" id="CommandFactory" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="309" x="1696.5" y="447"/><ellipse cx="1790.75" cy="463" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1794.875,466.9531 Q1794.5156,467.5781 1793.6719,468.2188 Q1792.2656,469.2344 1789.5313,469.2344 Q1787.3438,469.2344 1785.875,467.7656 Q1784.1719,466.0625 1784.1719,462.875 Q1784.1719,459.9375 1785.8594,458.1406 Q1787.4063,456.5156 1789.625,456.5156 Q1791.5,456.5156 1792.4844,456.8125 Q1793.4688,457.1094 1793.4688,457.1094 Q1793.4688,457.1094 1793.4688,456.5469 L1794.4844,456.4531 L1794.6406,460.5156 L1793.3125,460.6406 Q1792.5,457.0469 1789.7656,457.0469 Q1789.7656,457.0469 1789.1719,457.3281 Q1788.2656,457.6719 1787.75,458.2188 Q1786.375,459.7656 1786.3594,462.9063 Q1786.3438,465.6875 1787.875,467.25 Q1789.1719,468.5781 1790,468.5781 Q1792.0313,468.5781 1794.2188,466.0156 L1794.875,466.9531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="1811.25" y="469.894">CommandFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="1697.5" x2="2004.5" y1="479" y2="479"/><line style="stroke:#181818;stroke-width:0.5;" x1="1697.5" x2="2004.5" y1="487" y2="487"/><ellipse cx="1707.5" cy="502.4702" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="283" x="1716.5" y="507.8643">createCommand(cmdStr : String) : Command</text></g><!--MD5=[03da7ad6344b0b2c818a169ad3cc63fd]
class Permission--><g id="elem_Permission"><rect codeLine="30" fill="#F1F1F1" height="67.9404" id="Permission" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102" x="2455" y="732.5"/><ellipse cx="2470.45" cy="748.5" fill="#EB937F" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2475.95,751.5313 L2475.2469,754.5156 L2465.6063,754.5156 L2465.6063,754.1875 Q2466.4969,754.0938 2466.8094,753.8438 Q2467.2469,753.4844 2467.2469,752.4688 L2467.2469,744.3594 Q2467.2469,743.2969 2466.8094,742.9375 Q2466.5281,742.7031 2465.6063,742.625 L2465.6063,742.2969 L2475.1219,742.2969 L2475.1688,744.7813 L2473.825,744.7813 Q2473.6219,743.5 2473.1844,743.1875 Q2472.7625,742.8594 2471.3406,742.8594 L2468.95,742.8594 Q2468.95,742.8594 2468.95,742.8906 Q2469.1688,742.9688 2469.1688,743.4844 L2469.1688,747.75 L2471.0125,747.75 Q2472.075,747.75 2472.4188,747.3906 Q2472.7,747.0938 2472.8563,746.0469 L2474.2,746.0469 L2474.2,750.1719 L2472.8563,750.1719 Q2472.7,749.0469 2472.3875,748.75 Q2472.0594,748.4375 2471.0125,748.4375 L2469.2938,748.4375 L2469.2938,753.0469 Q2469.2938,753.6563 2469.7156,753.8125 Q2470.1375,753.9531 2471.0438,753.9531 Q2472.5906,753.9531 2473.3094,753.4531 Q2474.0125,752.9531 2474.5906,751.5313 L2475.95,751.5313 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="2484.55" y="755.394">Permission</text><line style="stroke:#181818;stroke-width:0.5;" x1="2456" x2="2556" y1="764.5" y2="764.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="2461" y="785.3643">Borrower,Staff</text><line style="stroke:#181818;stroke-width:0.5;" x1="2456" x2="2556" y1="792.4404" y2="792.4404"/></g><!--MD5=[3fd616f346a44cd59a91eb10b19e157c]
class User--><g id="elem_User"><rect codeLine="33" fill="#F1F1F1" height="242.4961" id="User" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="308" x="2112" y="645.5"/><ellipse cx="2235.75" cy="669.0161" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2239.875,672.9692 Q2239.5156,673.5942 2238.6719,674.2349 Q2237.2656,675.2505 2234.5313,675.2505 Q2232.3438,675.2505 2230.875,673.7817 Q2229.1719,672.0786 2229.1719,668.8911 Q2229.1719,665.9536 2230.8594,664.1567 Q2232.4063,662.5317 2234.625,662.5317 Q2236.5,662.5317 2237.4844,662.8286 Q2238.4688,663.1255 2238.4688,663.1255 Q2238.4688,663.1255 2238.4688,662.563 L2239.4844,662.4692 L2239.6406,666.5317 L2238.3125,666.6567 Q2237.5,663.063 2234.7656,663.063 Q2234.7656,663.063 2234.1719,663.3442 Q2233.2656,663.688 2232.75,664.2349 Q2231.375,665.7817 2231.3594,668.9224 Q2231.3438,671.7036 2232.875,673.2661 Q2234.1719,674.5942 2235,674.5942 Q2237.0313,674.5942 2239.2188,672.0317 L2239.875,672.9692 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="56" x="2254.25" y="664.9551">«Invoker»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="2267.75" y="684.4561">User</text><line style="stroke:#181818;stroke-width:0.5;" x1="2113" x2="2419" y1="692.5322" y2="692.5322"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="2120" y="705.0024"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="2132" y="713.3965">userName : String</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="2120" y="724.9429"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="2132" y="733.3369">userType : Permission</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="2120" y="744.8833"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="249" x="2132" y="753.2773">predefinedBorrowBookNumber : Integer</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="2120" y="764.8237"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="2132" y="773.2178">cmd : Command</text><line style="stroke:#181818;stroke-width:0.5;" x1="2113" x2="2419" y1="780.2939" y2="780.2939"/><ellipse cx="2123" cy="795.7642" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144" x="2132" y="801.1582">getUserName() : String</text><ellipse cx="2123" cy="815.7046" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="282" x="2132" y="821.0986">getPreDefinedBorrowBookNumber() : Integer</text><ellipse cx="2123" cy="835.645" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="263" x="2132" y="841.0391">setPreDefinedBorrowBookNumber() : void</text><ellipse cx="2123" cy="855.5854" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="233" x="2132" y="860.9795">setCommand(cmd : Command) : void</text><ellipse cx="2123" cy="875.5259" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="2132" y="880.9199">invoke() : void</text></g><!--MD5=[84e3a5e42879fb3231104d3c8e592439]
class Book--><g id="elem_Book"><rect codeLine="46" fill="#F1F1F1" height="347.1064" id="Book" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="202" x="2592" y="593"/><ellipse cx="2672.75" cy="609" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2676.875,612.9531 Q2676.5156,613.5781 2675.6719,614.2188 Q2674.2656,615.2344 2671.5313,615.2344 Q2669.3438,615.2344 2667.875,613.7656 Q2666.1719,612.0625 2666.1719,608.875 Q2666.1719,605.9375 2667.8594,604.1406 Q2669.4063,602.5156 2671.625,602.5156 Q2673.5,602.5156 2674.4844,602.8125 Q2675.4688,603.1094 2675.4688,603.1094 Q2675.4688,603.1094 2675.4688,602.5469 L2676.4844,602.4531 L2676.6406,606.5156 L2675.3125,606.6406 Q2674.5,603.0469 2671.7656,603.0469 Q2671.7656,603.0469 2671.1719,603.3281 Q2670.2656,603.6719 2669.75,604.2188 Q2668.375,605.7656 2668.3594,608.9063 Q2668.3438,611.6875 2669.875,613.25 Q2671.1719,614.5781 2672,614.5781 Q2674.0313,614.5781 2676.2188,612.0156 L2676.875,612.9531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="2693.25" y="615.894">Book</text><line style="stroke:#181818;stroke-width:0.5;" x1="2593" x2="2793" y1="625" y2="625"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="2600" y="637.4702"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="2612" y="645.8643">bookID : Integer</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="2600" y="657.4106"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="2612" y="665.8047">bookAuthor : String</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="2600" y="677.3511"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="2612" y="685.7451">bookSubject : String</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="2600" y="697.2915"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="2612" y="705.6855">borrowed : boolean</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="2600" y="717.2319"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="2612" y="725.626">borrowedBy : User</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="2612" y="745.5664"> </text><ellipse cx="2603" cy="760.1128" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137" x="2612" y="765.5068">getBorrowedBy : User</text><line style="stroke:#181818;stroke-width:0.5;" x1="2593" x2="2793" y1="772.583" y2="772.583"/><ellipse cx="2603" cy="788.0532" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="2612" y="793.4473">getBookID() : Integer</text><ellipse cx="2603" cy="807.9937" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="2612" y="813.3877">getAuthor() : String</text><ellipse cx="2603" cy="827.9341" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="2612" y="833.3281">getSubject() : String</text><ellipse cx="2603" cy="847.8745" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="2612" y="853.2686">isBorrowed() : boolean</text><ellipse cx="2603" cy="867.8149" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="2612" y="873.209">doBorrowed() : void</text><ellipse cx="2603" cy="887.7554" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="2612" y="893.1494">doReturn() : void</text><ellipse cx="2603" cy="907.6958" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="176" x="2612" y="913.0898">equals(o : Object) : boolean</text><ellipse cx="2603" cy="927.6362" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="2612" y="933.0303">hashCode() : int</text></g><!--MD5=[521817ab83e81da341a3f4b5e91bae41]
class Command--><g id="elem_Command"><rect codeLine="68" fill="#F1F1F1" height="122.8535" id="Command" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="406" x="1786" y="1068"/><ellipse cx="1952.75" cy="1091.5161" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1955.75,1097.5317 L1950,1097.5317 L1950,1097.2036 Q1951.0938,1097.1411 1951.4844,1096.7817 Q1951.875,1096.4224 1951.875,1095.4224 L1951.875,1087.4536 Q1951.875,1086.4224 1951.4531,1086.0474 Q1951.0938,1085.7192 1950,1085.6567 L1950,1085.3286 L1955.75,1085.3286 L1955.75,1085.6567 Q1954.7344,1085.7036 1954.3594,1085.9849 Q1953.8594,1086.3911 1953.8594,1087.4536 L1953.8594,1095.4224 Q1953.8594,1096.4692 1954.3594,1096.8442 Q1954.7344,1097.1567 1955.75,1097.2036 L1955.75,1097.5317 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="62" x="1974.25" y="1087.4551">«指令接口»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="64" x="1973.25" y="1106.9561">Command</text><line style="stroke:#181818;stroke-width:0.5;" x1="1787" x2="2191" y1="1115.0322" y2="1115.0322"/><line style="stroke:#181818;stroke-width:0.5;" x1="1787" x2="2191" y1="1123.0322" y2="1123.0322"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="262" x="1806" y="1143.8965">execute(invoker : User, arg : String) : void</text><ellipse cx="1797" cy="1158.4429" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="380" x="1806" y="1163.8369">getCommandPermissionLevel() : CommandPermissionLevel;</text><ellipse cx="1797" cy="1178.3833" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="219" x="1806" y="1183.7773">getPermissionDeniedMsg() : String</text></g><!--MD5=[379f8c8b7244d5460e5691a218ae9c15]
class ConfirmDecorator--><g id="elem_ConfirmDecorator"><rect codeLine="73" fill="#F1F1F1" height="222.5557" id="ConfirmDecorator" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="406" x="1345" y="1018"/><ellipse cx="1487.75" cy="1041.5161" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1491.875,1045.4692 Q1491.5156,1046.0942 1490.6719,1046.7349 Q1489.2656,1047.7505 1486.5313,1047.7505 Q1484.3438,1047.7505 1482.875,1046.2817 Q1481.1719,1044.5786 1481.1719,1041.3911 Q1481.1719,1038.4536 1482.8594,1036.6567 Q1484.4063,1035.0317 1486.625,1035.0317 Q1488.5,1035.0317 1489.4844,1035.3286 Q1490.4688,1035.6255 1490.4688,1035.6255 Q1490.4688,1035.6255 1490.4688,1035.063 L1491.4844,1034.9692 L1491.6406,1039.0317 L1490.3125,1039.1567 Q1489.5,1035.563 1486.7656,1035.563 Q1486.7656,1035.563 1486.1719,1035.8442 Q1485.2656,1036.188 1484.75,1036.7349 Q1483.375,1038.2817 1483.3594,1041.4224 Q1483.3438,1044.2036 1484.875,1045.7661 Q1486.1719,1047.0942 1487,1047.0942 Q1489.0313,1047.0942 1491.2188,1044.5317 L1491.875,1045.4692 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="68" x="1530.25" y="1037.4551">«Decorator»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="1508.25" y="1056.9561">ConfirmDecorator</text><line style="stroke:#181818;stroke-width:0.5;" x1="1346" x2="1750" y1="1065.0322" y2="1065.0322"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1353" y="1077.5024"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1365" y="1085.8965">cmd : Command</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1353" y="1097.4429"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="1365" y="1105.8369">msg : String</text><line style="stroke:#181818;stroke-width:0.5;" x1="1346" x2="1750" y1="1112.9131" y2="1112.9131"/><ellipse cx="1356" cy="1128.3833" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181" x="1365" y="1133.7773">isStaff(user : User) : boolean</text><ellipse cx="1356" cy="1148.3237" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="310" x="1365" y="1153.7178">hasConfirm(invoker : User, arg : String) : boolean</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1365" y="1173.6582">«Override»</text><ellipse cx="1356" cy="1188.2046" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="262" x="1365" y="1193.5986">execute(invoker : User, arg : String) : void</text><ellipse cx="1356" cy="1208.145" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="380" x="1365" y="1213.5391">getCommandPermissionLevel() : CommandPermissionLevel;</text><ellipse cx="1356" cy="1228.0854" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="219" x="1365" y="1233.4795">getPermissionDeniedMsg() : String</text></g><!--MD5=[0015ce85c0cc678378b47face2a7252f]
class CommandPermissionLevel--><g id="elem_CommandPermissionLevel"><rect codeLine="84" fill="#F1F1F1" height="67.9404" id="CommandPermissionLevel" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="199" x="2227.5" y="1095.5"/><ellipse cx="2242.5" cy="1111.5" fill="#EB937F" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2248,1114.5313 L2247.2969,1117.5156 L2237.6563,1117.5156 L2237.6563,1117.1875 Q2238.5469,1117.0938 2238.8594,1116.8438 Q2239.2969,1116.4844 2239.2969,1115.4688 L2239.2969,1107.3594 Q2239.2969,1106.2969 2238.8594,1105.9375 Q2238.5781,1105.7031 2237.6563,1105.625 L2237.6563,1105.2969 L2247.1719,1105.2969 L2247.2188,1107.7813 L2245.875,1107.7813 Q2245.6719,1106.5 2245.2344,1106.1875 Q2244.8125,1105.8594 2243.3906,1105.8594 L2241,1105.8594 Q2241,1105.8594 2241,1105.8906 Q2241.2188,1105.9688 2241.2188,1106.4844 L2241.2188,1110.75 L2243.0625,1110.75 Q2244.125,1110.75 2244.4688,1110.3906 Q2244.75,1110.0938 2244.9063,1109.0469 L2246.25,1109.0469 L2246.25,1113.1719 L2244.9063,1113.1719 Q2244.75,1112.0469 2244.4375,1111.75 Q2244.1094,1111.4375 2243.0625,1111.4375 L2241.3438,1111.4375 L2241.3438,1116.0469 Q2241.3438,1116.6563 2241.7656,1116.8125 Q2242.1875,1116.9531 2243.0938,1116.9531 Q2244.6406,1116.9531 2245.3594,1116.4531 Q2246.0625,1115.9531 2246.6406,1114.5313 L2248,1114.5313 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167" x="2256.5" y="1118.394">CommandPermissionLevel</text><line style="stroke:#181818;stroke-width:0.5;" x1="2228.5" x2="2425.5" y1="1127.5" y2="1127.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="2233.5" y="1148.3643">Staff,Self,Borrower</text><line style="stroke:#181818;stroke-width:0.5;" x1="2228.5" x2="2425.5" y1="1155.4404" y2="1155.4404"/></g><!--MD5=[38de729354a39789ca0d97d2a2e612aa]
class AddBook--><g id="elem_AddBook"><rect codeLine="87" fill="#F1F1F1" height="167.6426" id="AddBook" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="406" x="22" y="1301"/><ellipse cx="192.25" cy="1317" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M196.375,1320.9531 Q196.0156,1321.5781 195.1719,1322.2188 Q193.7656,1323.2344 191.0313,1323.2344 Q188.8438,1323.2344 187.375,1321.7656 Q185.6719,1320.0625 185.6719,1316.875 Q185.6719,1313.9375 187.3594,1312.1406 Q188.9063,1310.5156 191.125,1310.5156 Q193,1310.5156 193.9844,1310.8125 Q194.9688,1311.1094 194.9688,1311.1094 Q194.9688,1311.1094 194.9688,1310.5469 L195.9844,1310.4531 L196.1406,1314.5156 L194.8125,1314.6406 Q194,1311.0469 191.2656,1311.0469 Q191.2656,1311.0469 190.6719,1311.3281 Q189.7656,1311.6719 189.25,1312.2188 Q187.875,1313.7656 187.8594,1316.9063 Q187.8438,1319.6875 189.375,1321.25 Q190.6719,1322.5781 191.5,1322.5781 Q193.5313,1322.5781 195.7188,1320.0156 L196.375,1320.9531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="212.75" y="1323.894">AddBook</text><line style="stroke:#181818;stroke-width:0.5;" x1="23" x2="427" y1="1333" y2="1333"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="28" y="1353.8643">p : CommandPermissionLevel</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="188" x="28" y="1373.8047">permissionDeniedMsg : String</text><line style="stroke:#181818;stroke-width:0.5;" x1="23" x2="427" y1="1380.8809" y2="1380.8809"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="42" y="1401.7451">«Override»</text><ellipse cx="33" cy="1416.2915" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="262" x="42" y="1421.6855">execute(invoker : User, arg : String) : void</text><ellipse cx="33" cy="1436.2319" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="380" x="42" y="1441.626">getCommandPermissionLevel() : CommandPermissionLevel;</text><ellipse cx="33" cy="1456.1724" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="219" x="42" y="1461.5664">getPermissionDeniedMsg() : String</text></g><!--MD5=[0344a75e21e1fbd548b0309f7134e409]
class RemoveBook--><g id="elem_RemoveBook"><rect codeLine="97" fill="#F1F1F1" height="167.6426" id="RemoveBook" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="406" x="463" y="1301"/><ellipse cx="619.75" cy="1317" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M623.875,1320.9531 Q623.5156,1321.5781 622.6719,1322.2188 Q621.2656,1323.2344 618.5313,1323.2344 Q616.3438,1323.2344 614.875,1321.7656 Q613.1719,1320.0625 613.1719,1316.875 Q613.1719,1313.9375 614.8594,1312.1406 Q616.4063,1310.5156 618.625,1310.5156 Q620.5,1310.5156 621.4844,1310.8125 Q622.4688,1311.1094 622.4688,1311.1094 Q622.4688,1311.1094 622.4688,1310.5469 L623.4844,1310.4531 L623.6406,1314.5156 L622.3125,1314.6406 Q621.5,1311.0469 618.7656,1311.0469 Q618.7656,1311.0469 618.1719,1311.3281 Q617.2656,1311.6719 616.75,1312.2188 Q615.375,1313.7656 615.3594,1316.9063 Q615.3438,1319.6875 616.875,1321.25 Q618.1719,1322.5781 619,1322.5781 Q621.0313,1322.5781 623.2188,1320.0156 L623.875,1320.9531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="640.25" y="1323.894">RemoveBook</text><line style="stroke:#181818;stroke-width:0.5;" x1="464" x2="868" y1="1333" y2="1333"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="469" y="1353.8643">p : CommandPermissionLevel</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="188" x="469" y="1373.8047">permissionDeniedMsg : String</text><line style="stroke:#181818;stroke-width:0.5;" x1="464" x2="868" y1="1380.8809" y2="1380.8809"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="483" y="1401.7451">«Override»</text><ellipse cx="474" cy="1416.2915" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="262" x="483" y="1421.6855">execute(invoker : User, arg : String) : void</text><ellipse cx="474" cy="1436.2319" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="380" x="483" y="1441.626">getCommandPermissionLevel() : CommandPermissionLevel;</text><ellipse cx="474" cy="1456.1724" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="219" x="483" y="1461.5664">getPermissionDeniedMsg() : String</text></g><!--MD5=[75ec85fc313fa75958b62cd1fc2ce9f6]
class Checkout--><g id="elem_Checkout"><rect codeLine="107" fill="#F1F1F1" height="167.6426" id="Checkout" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="406" x="904" y="1301"/><ellipse cx="1072.75" cy="1317" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1076.875,1320.9531 Q1076.5156,1321.5781 1075.6719,1322.2188 Q1074.2656,1323.2344 1071.5313,1323.2344 Q1069.3438,1323.2344 1067.875,1321.7656 Q1066.1719,1320.0625 1066.1719,1316.875 Q1066.1719,1313.9375 1067.8594,1312.1406 Q1069.4063,1310.5156 1071.625,1310.5156 Q1073.5,1310.5156 1074.4844,1310.8125 Q1075.4688,1311.1094 1075.4688,1311.1094 Q1075.4688,1311.1094 1075.4688,1310.5469 L1076.4844,1310.4531 L1076.6406,1314.5156 L1075.3125,1314.6406 Q1074.5,1311.0469 1071.7656,1311.0469 Q1071.7656,1311.0469 1071.1719,1311.3281 Q1070.2656,1311.6719 1069.75,1312.2188 Q1068.375,1313.7656 1068.3594,1316.9063 Q1068.3438,1319.6875 1069.875,1321.25 Q1071.1719,1322.5781 1072,1322.5781 Q1074.0313,1322.5781 1076.2188,1320.0156 L1076.875,1320.9531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="1093.25" y="1323.894">Checkout</text><line style="stroke:#181818;stroke-width:0.5;" x1="905" x2="1309" y1="1333" y2="1333"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="910" y="1353.8643">p : CommandPermissionLevel</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="188" x="910" y="1373.8047">permissionDeniedMsg : String</text><line style="stroke:#181818;stroke-width:0.5;" x1="905" x2="1309" y1="1380.8809" y2="1380.8809"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="924" y="1401.7451">«Override»</text><ellipse cx="915" cy="1416.2915" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="262" x="924" y="1421.6855">execute(invoker : User, arg : String) : void</text><ellipse cx="915" cy="1436.2319" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="380" x="924" y="1441.626">getCommandPermissionLevel() : CommandPermissionLevel;</text><ellipse cx="915" cy="1456.1724" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="219" x="924" y="1461.5664">getPermissionDeniedMsg() : String</text></g><!--MD5=[eea7d6d63c6a2aed834fd90f2fb9cb1d]
class Return--><g id="elem_Return"><rect codeLine="117" fill="#F1F1F1" height="167.6426" id="Return" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="406" x="1345" y="1301"/><ellipse cx="1522.25" cy="1317" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1526.375,1320.9531 Q1526.0156,1321.5781 1525.1719,1322.2188 Q1523.7656,1323.2344 1521.0313,1323.2344 Q1518.8438,1323.2344 1517.375,1321.7656 Q1515.6719,1320.0625 1515.6719,1316.875 Q1515.6719,1313.9375 1517.3594,1312.1406 Q1518.9063,1310.5156 1521.125,1310.5156 Q1523,1310.5156 1523.9844,1310.8125 Q1524.9688,1311.1094 1524.9688,1311.1094 Q1524.9688,1311.1094 1524.9688,1310.5469 L1525.9844,1310.4531 L1526.1406,1314.5156 L1524.8125,1314.6406 Q1524,1311.0469 1521.2656,1311.0469 Q1521.2656,1311.0469 1520.6719,1311.3281 Q1519.7656,1311.6719 1519.25,1312.2188 Q1517.875,1313.7656 1517.8594,1316.9063 Q1517.8438,1319.6875 1519.375,1321.25 Q1520.6719,1322.5781 1521.5,1322.5781 Q1523.5313,1322.5781 1525.7188,1320.0156 L1526.375,1320.9531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="1542.75" y="1323.894">Return</text><line style="stroke:#181818;stroke-width:0.5;" x1="1346" x2="1750" y1="1333" y2="1333"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="1351" y="1353.8643">p : CommandPermissionLevel</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="188" x="1351" y="1373.8047">permissionDeniedMsg : String</text><line style="stroke:#181818;stroke-width:0.5;" x1="1346" x2="1750" y1="1380.8809" y2="1380.8809"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1365" y="1401.7451">«Override»</text><ellipse cx="1356" cy="1416.2915" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="262" x="1365" y="1421.6855">execute(invoker : User, arg : String) : void</text><ellipse cx="1356" cy="1436.2319" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="380" x="1365" y="1441.626">getCommandPermissionLevel() : CommandPermissionLevel;</text><ellipse cx="1356" cy="1456.1724" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="219" x="1365" y="1461.5664">getPermissionDeniedMsg() : String</text></g><!--MD5=[59841e3122b8fd608b7ee4226ed66dee]
class ListAuthor--><g id="elem_ListAuthor"><rect codeLine="127" fill="#F1F1F1" height="167.6426" id="ListAuthor" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="406" x="1786" y="1301"/><ellipse cx="1952.75" cy="1317" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1956.875,1320.9531 Q1956.5156,1321.5781 1955.6719,1322.2188 Q1954.2656,1323.2344 1951.5313,1323.2344 Q1949.3438,1323.2344 1947.875,1321.7656 Q1946.1719,1320.0625 1946.1719,1316.875 Q1946.1719,1313.9375 1947.8594,1312.1406 Q1949.4063,1310.5156 1951.625,1310.5156 Q1953.5,1310.5156 1954.4844,1310.8125 Q1955.4688,1311.1094 1955.4688,1311.1094 Q1955.4688,1311.1094 1955.4688,1310.5469 L1956.4844,1310.4531 L1956.6406,1314.5156 L1955.3125,1314.6406 Q1954.5,1311.0469 1951.7656,1311.0469 Q1951.7656,1311.0469 1951.1719,1311.3281 Q1950.2656,1311.6719 1949.75,1312.2188 Q1948.375,1313.7656 1948.3594,1316.9063 Q1948.3438,1319.6875 1949.875,1321.25 Q1951.1719,1322.5781 1952,1322.5781 Q1954.0313,1322.5781 1956.2188,1320.0156 L1956.875,1320.9531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1973.25" y="1323.894">ListAuthor</text><line style="stroke:#181818;stroke-width:0.5;" x1="1787" x2="2191" y1="1333" y2="1333"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="1792" y="1353.8643">p : CommandPermissionLevel</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="188" x="1792" y="1373.8047">permissionDeniedMsg : String</text><line style="stroke:#181818;stroke-width:0.5;" x1="1787" x2="2191" y1="1380.8809" y2="1380.8809"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1806" y="1401.7451">«Override»</text><ellipse cx="1797" cy="1416.2915" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="262" x="1806" y="1421.6855">execute(invoker : User, arg : String) : void</text><ellipse cx="1797" cy="1436.2319" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="380" x="1806" y="1441.626">getCommandPermissionLevel() : CommandPermissionLevel;</text><ellipse cx="1797" cy="1456.1724" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="219" x="1806" y="1461.5664">getPermissionDeniedMsg() : String</text></g><!--MD5=[a39d68fc95512c699ff3dbe1fc0c36d3]
class ListSubject--><g id="elem_ListSubject"><rect codeLine="137" fill="#F1F1F1" height="167.6426" id="ListSubject" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="406" x="2227" y="1301"/><ellipse cx="2391.25" cy="1317" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2395.375,1320.9531 Q2395.0156,1321.5781 2394.1719,1322.2188 Q2392.7656,1323.2344 2390.0313,1323.2344 Q2387.8438,1323.2344 2386.375,1321.7656 Q2384.6719,1320.0625 2384.6719,1316.875 Q2384.6719,1313.9375 2386.3594,1312.1406 Q2387.9063,1310.5156 2390.125,1310.5156 Q2392,1310.5156 2392.9844,1310.8125 Q2393.9688,1311.1094 2393.9688,1311.1094 Q2393.9688,1311.1094 2393.9688,1310.5469 L2394.9844,1310.4531 L2395.1406,1314.5156 L2393.8125,1314.6406 Q2393,1311.0469 2390.2656,1311.0469 Q2390.2656,1311.0469 2389.6719,1311.3281 Q2388.7656,1311.6719 2388.25,1312.2188 Q2386.875,1313.7656 2386.8594,1316.9063 Q2386.8438,1319.6875 2388.375,1321.25 Q2389.6719,1322.5781 2390.5,1322.5781 Q2392.5313,1322.5781 2394.7188,1320.0156 L2395.375,1320.9531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="2411.75" y="1323.894">ListSubject</text><line style="stroke:#181818;stroke-width:0.5;" x1="2228" x2="2632" y1="1333" y2="1333"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="2233" y="1353.8643">p : CommandPermissionLevel</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="188" x="2233" y="1373.8047">permissionDeniedMsg : String</text><line style="stroke:#181818;stroke-width:0.5;" x1="2228" x2="2632" y1="1380.8809" y2="1380.8809"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="2247" y="1401.7451">«Override»</text><ellipse cx="2238" cy="1416.2915" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="262" x="2247" y="1421.6855">execute(invoker : User, arg : String) : void</text><ellipse cx="2238" cy="1436.2319" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="380" x="2247" y="1441.626">getCommandPermissionLevel() : CommandPermissionLevel;</text><ellipse cx="2238" cy="1456.1724" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="219" x="2247" y="1461.5664">getPermissionDeniedMsg() : String</text></g><!--MD5=[8119da54e27c7ab3be80234211185f90]
class FindChecked--><g id="elem_FindChecked"><rect codeLine="147" fill="#F1F1F1" height="167.6426" id="FindChecked" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="406" x="2668" y="1301"/><ellipse cx="2824.75" cy="1317" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2828.875,1320.9531 Q2828.5156,1321.5781 2827.6719,1322.2188 Q2826.2656,1323.2344 2823.5313,1323.2344 Q2821.3438,1323.2344 2819.875,1321.7656 Q2818.1719,1320.0625 2818.1719,1316.875 Q2818.1719,1313.9375 2819.8594,1312.1406 Q2821.4063,1310.5156 2823.625,1310.5156 Q2825.5,1310.5156 2826.4844,1310.8125 Q2827.4688,1311.1094 2827.4688,1311.1094 Q2827.4688,1311.1094 2827.4688,1310.5469 L2828.4844,1310.4531 L2828.6406,1314.5156 L2827.3125,1314.6406 Q2826.5,1311.0469 2823.7656,1311.0469 Q2823.7656,1311.0469 2823.1719,1311.3281 Q2822.2656,1311.6719 2821.75,1312.2188 Q2820.375,1313.7656 2820.3594,1316.9063 Q2820.3438,1319.6875 2821.875,1321.25 Q2823.1719,1322.5781 2824,1322.5781 Q2826.0313,1322.5781 2828.2188,1320.0156 L2828.875,1320.9531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="2845.25" y="1323.894">FindChecked</text><line style="stroke:#181818;stroke-width:0.5;" x1="2669" x2="3073" y1="1333" y2="1333"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="2674" y="1353.8643">p : CommandPermissionLevel</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="188" x="2674" y="1373.8047">permissionDeniedMsg : String</text><line style="stroke:#181818;stroke-width:0.5;" x1="2669" x2="3073" y1="1380.8809" y2="1380.8809"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="2688" y="1401.7451">«Override»</text><ellipse cx="2679" cy="1416.2915" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="262" x="2688" y="1421.6855">execute(invoker : User, arg : String) : void</text><ellipse cx="2679" cy="1436.2319" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="380" x="2688" y="1441.626">getCommandPermissionLevel() : CommandPermissionLevel;</text><ellipse cx="2679" cy="1456.1724" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="219" x="2688" y="1461.5664">getPermissionDeniedMsg() : String</text></g><!--MD5=[31851d4aca152947f107800e7e0ed568]
class FindBorrower--><g id="elem_FindBorrower"><rect codeLine="157" fill="#F1F1F1" height="167.6426" id="FindBorrower" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="406" x="3109" y="1301"/><ellipse cx="3265.25" cy="1317" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M3269.375,1320.9531 Q3269.0156,1321.5781 3268.1719,1322.2188 Q3266.7656,1323.2344 3264.0313,1323.2344 Q3261.8438,1323.2344 3260.375,1321.7656 Q3258.6719,1320.0625 3258.6719,1316.875 Q3258.6719,1313.9375 3260.3594,1312.1406 Q3261.9063,1310.5156 3264.125,1310.5156 Q3266,1310.5156 3266.9844,1310.8125 Q3267.9688,1311.1094 3267.9688,1311.1094 Q3267.9688,1311.1094 3267.9688,1310.5469 L3268.9844,1310.4531 L3269.1406,1314.5156 L3267.8125,1314.6406 Q3267,1311.0469 3264.2656,1311.0469 Q3264.2656,1311.0469 3263.6719,1311.3281 Q3262.7656,1311.6719 3262.25,1312.2188 Q3260.875,1313.7656 3260.8594,1316.9063 Q3260.8438,1319.6875 3262.375,1321.25 Q3263.6719,1322.5781 3264.5,1322.5781 Q3266.5313,1322.5781 3268.7188,1320.0156 L3269.375,1320.9531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="3285.75" y="1323.894">FindBorrower</text><line style="stroke:#181818;stroke-width:0.5;" x1="3110" x2="3514" y1="1333" y2="1333"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="3115" y="1353.8643">p : CommandPermissionLevel</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="188" x="3115" y="1373.8047">permissionDeniedMsg : String</text><line style="stroke:#181818;stroke-width:0.5;" x1="3110" x2="3514" y1="1380.8809" y2="1380.8809"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="3129" y="1401.7451">«Override»</text><ellipse cx="3120" cy="1416.2915" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="262" x="3129" y="1421.6855">execute(invoker : User, arg : String) : void</text><ellipse cx="3120" cy="1436.2319" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="380" x="3129" y="1441.626">getCommandPermissionLevel() : CommandPermissionLevel;</text><ellipse cx="3120" cy="1456.1724" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="219" x="3129" y="1461.5664">getPermissionDeniedMsg() : String</text></g><!--MD5=[5c6c7d52e42032554528404b62c1d271]
class RuntimeException--><g id="elem_RuntimeException"><rect codeLine="169" fill="#F1F1F1" height="87.8809" id="RuntimeException" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="145" x="3855.5" y="722.5"/><ellipse cx="3870.5" cy="738.5" fill="#D94321" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M3876.7031,744.5156 L3871.0938,744.5156 L3871.0938,744.1875 Q3872.4219,744.0156 3872.4219,743.2969 Q3872.4219,742.8906 3871.6094,741.4688 L3870.5469,739.6719 L3869.0156,741.8281 Q3868.1875,743 3868.1875,743.2188 Q3868.1875,744.0469 3869.2031,744.1875 L3869.2031,744.5156 L3864.6094,744.5156 L3864.6094,744.1875 Q3865.2813,744.1094 3865.7344,743.75 Q3866.1406,743.3906 3867.0313,742.1875 L3869.7344,738.4375 L3867.875,735.2656 Q3866.7969,733.4375 3866.0781,732.9375 Q3865.7656,732.7188 3864.8125,732.625 L3864.8125,732.2969 L3870.5313,732.2969 L3870.5313,732.625 Q3869.7813,732.6719 3869.5469,732.7656 Q3869.2031,732.8906 3869.2031,733.2656 Q3869.2031,733.9063 3870.5938,736.1406 L3870.9375,736.75 L3872.4219,734.6563 Q3873.1406,733.625 3873.1406,733.2969 Q3873.1406,732.8906 3872.75,732.7344 Q3872.5313,732.6719 3871.9063,732.625 L3871.9063,732.2969 L3876.5938,732.2969 L3876.5938,732.625 Q3875.875,732.6875 3875.6094,732.8594 Q3875.1719,733.1406 3874.4063,734.25 L3871.8125,737.9219 L3874.8125,742.9531 Q3875.2656,743.7188 3875.6875,743.9531 Q3875.9688,744.0938 3876.7031,744.1875 L3876.7031,744.5156 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="3884.5" y="745.394">RuntimeException</text><line style="stroke:#181818;stroke-width:0.5;" x1="3856.5" x2="3999.5" y1="754.5" y2="754.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="3861.5" y="775.3643">«運行期異常類»</text><line style="stroke:#181818;stroke-width:0.5;" x1="3856.5" x2="3999.5" y1="782.4404" y2="782.4404"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="3861.5" y="803.3047">«在Java lang包中»</text></g><!--MD5=[19ff5164c447ed8a14ba6448982ef4db]
class BookCheckoutException--><g id="elem_BookCheckoutException"><rect codeLine="173" fill="#F1F1F1" height="67.9404" id="BookCheckoutException" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="185" x="3595.5" y="1095.5"/><ellipse cx="3610.5" cy="1111.5" fill="#D94321" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M3616.7031,1117.5156 L3611.0938,1117.5156 L3611.0938,1117.1875 Q3612.4219,1117.0156 3612.4219,1116.2969 Q3612.4219,1115.8906 3611.6094,1114.4688 L3610.5469,1112.6719 L3609.0156,1114.8281 Q3608.1875,1116 3608.1875,1116.2188 Q3608.1875,1117.0469 3609.2031,1117.1875 L3609.2031,1117.5156 L3604.6094,1117.5156 L3604.6094,1117.1875 Q3605.2813,1117.1094 3605.7344,1116.75 Q3606.1406,1116.3906 3607.0313,1115.1875 L3609.7344,1111.4375 L3607.875,1108.2656 Q3606.7969,1106.4375 3606.0781,1105.9375 Q3605.7656,1105.7188 3604.8125,1105.625 L3604.8125,1105.2969 L3610.5313,1105.2969 L3610.5313,1105.625 Q3609.7813,1105.6719 3609.5469,1105.7656 Q3609.2031,1105.8906 3609.2031,1106.2656 Q3609.2031,1106.9063 3610.5938,1109.1406 L3610.9375,1109.75 L3612.4219,1107.6563 Q3613.1406,1106.625 3613.1406,1106.2969 Q3613.1406,1105.8906 3612.75,1105.7344 Q3612.5313,1105.6719 3611.9063,1105.625 L3611.9063,1105.2969 L3616.5938,1105.2969 L3616.5938,1105.625 Q3615.875,1105.6875 3615.6094,1105.8594 Q3615.1719,1106.1406 3614.4063,1107.25 L3611.8125,1110.9219 L3614.8125,1115.9531 Q3615.2656,1116.7188 3615.6875,1116.9531 Q3615.9688,1117.0938 3616.7031,1117.1875 L3616.7031,1117.5156 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="3624.5" y="1118.394">BookCheckoutException</text><line style="stroke:#181818;stroke-width:0.5;" x1="3596.5" x2="3779.5" y1="1127.5" y2="1127.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160" x="3601.5" y="1148.3643">«借書/還書異常時被拋出»</text><line style="stroke:#181818;stroke-width:0.5;" x1="3596.5" x2="3779.5" y1="1155.4404" y2="1155.4404"/></g><!--MD5=[3a04dcbb65c557f50b3e682d51dcd739]
class ExceedLimitationException--><g id="elem_ExceedLimitationException"><rect codeLine="176" fill="#F1F1F1" height="67.9404" id="ExceedLimitationException" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="225" x="3815.5" y="1095.5"/><ellipse cx="3842.2" cy="1111.5" fill="#D94321" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M3848.4031,1117.5156 L3842.7938,1117.5156 L3842.7938,1117.1875 Q3844.1219,1117.0156 3844.1219,1116.2969 Q3844.1219,1115.8906 3843.3094,1114.4688 L3842.2469,1112.6719 L3840.7156,1114.8281 Q3839.8875,1116 3839.8875,1116.2188 Q3839.8875,1117.0469 3840.9031,1117.1875 L3840.9031,1117.5156 L3836.3094,1117.5156 L3836.3094,1117.1875 Q3836.9813,1117.1094 3837.4344,1116.75 Q3837.8406,1116.3906 3838.7313,1115.1875 L3841.4344,1111.4375 L3839.575,1108.2656 Q3838.4969,1106.4375 3837.7781,1105.9375 Q3837.4656,1105.7188 3836.5125,1105.625 L3836.5125,1105.2969 L3842.2313,1105.2969 L3842.2313,1105.625 Q3841.4813,1105.6719 3841.2469,1105.7656 Q3840.9031,1105.8906 3840.9031,1106.2656 Q3840.9031,1106.9063 3842.2938,1109.1406 L3842.6375,1109.75 L3844.1219,1107.6563 Q3844.8406,1106.625 3844.8406,1106.2969 Q3844.8406,1105.8906 3844.45,1105.7344 Q3844.2313,1105.6719 3843.6063,1105.625 L3843.6063,1105.2969 L3848.2938,1105.2969 L3848.2938,1105.625 Q3847.575,1105.6875 3847.3094,1105.8594 Q3846.8719,1106.1406 3846.1063,1107.25 L3843.5125,1110.9219 L3846.5125,1115.9531 Q3846.9656,1116.7188 3847.3875,1116.9531 Q3847.6688,1117.0938 3848.4031,1117.1875 L3848.4031,1117.5156 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167" x="3858.8" y="1118.394">ExceedLimitationException</text><line style="stroke:#181818;stroke-width:0.5;" x1="3816.5" x2="4039.5" y1="1127.5" y2="1127.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="213" x="3821.5" y="1148.3643">«Borrower借書超過數量時被拋出»</text><line style="stroke:#181818;stroke-width:0.5;" x1="3816.5" x2="4039.5" y1="1155.4404" y2="1155.4404"/></g><!--MD5=[e91ffa73b030e8bef0418acd1f2b53d6]
class PermissionDeniedException--><g id="elem_PermissionDeniedException"><rect codeLine="179" fill="#F1F1F1" height="67.9404" id="PermissionDeniedException" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="214" x="4076" y="1095.5"/><ellipse cx="4094.15" cy="1111.5" fill="#D94321" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M4100.3531,1117.5156 L4094.7438,1117.5156 L4094.7438,1117.1875 Q4096.0719,1117.0156 4096.0719,1116.2969 Q4096.0719,1115.8906 4095.2594,1114.4688 L4094.1969,1112.6719 L4092.6656,1114.8281 Q4091.8375,1116 4091.8375,1116.2188 Q4091.8375,1117.0469 4092.8531,1117.1875 L4092.8531,1117.5156 L4088.2594,1117.5156 L4088.2594,1117.1875 Q4088.9313,1117.1094 4089.3844,1116.75 Q4089.7906,1116.3906 4090.6813,1115.1875 L4093.3844,1111.4375 L4091.525,1108.2656 Q4090.4469,1106.4375 4089.7281,1105.9375 Q4089.4156,1105.7188 4088.4625,1105.625 L4088.4625,1105.2969 L4094.1813,1105.2969 L4094.1813,1105.625 Q4093.4313,1105.6719 4093.1969,1105.7656 Q4092.8531,1105.8906 4092.8531,1106.2656 Q4092.8531,1106.9063 4094.2438,1109.1406 L4094.5875,1109.75 L4096.0719,1107.6563 Q4096.7906,1106.625 4096.7906,1106.2969 Q4096.7906,1105.8906 4096.4,1105.7344 Q4096.1813,1105.6719 4095.5563,1105.625 L4095.5563,1105.2969 L4100.2438,1105.2969 L4100.2438,1105.625 Q4099.525,1105.6875 4099.2594,1105.8594 Q4098.8219,1106.1406 4098.0563,1107.25 L4095.4625,1110.9219 L4098.4625,1115.9531 Q4098.9156,1116.7188 4099.3375,1116.9531 Q4099.6188,1117.0938 4100.3531,1117.1875 L4100.3531,1117.5156 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="4108.85" y="1118.394">PermissionDeniedException</text><line style="stroke:#181818;stroke-width:0.5;" x1="4077" x2="4289" y1="1127.5" y2="1127.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="202" x="4082" y="1148.3643">«Invoker無權執行指令時被拋出»</text><line style="stroke:#181818;stroke-width:0.5;" x1="4077" x2="4289" y1="1155.4404" y2="1155.4404"/></g><!--MD5=[84718776d214be480e4c259efcb737fc]
class Main--><g id="elem_Main"><rect codeLine="1" fill="#F1F1F1" height="87.8809" id="Main" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="296" x="1745" y="7"/><ellipse cx="1873.75" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1877.875,26.9531 Q1877.5156,27.5781 1876.6719,28.2188 Q1875.2656,29.2344 1872.5313,29.2344 Q1870.3438,29.2344 1868.875,27.7656 Q1867.1719,26.0625 1867.1719,22.875 Q1867.1719,19.9375 1868.8594,18.1406 Q1870.4063,16.5156 1872.625,16.5156 Q1874.5,16.5156 1875.4844,16.8125 Q1876.4688,17.1094 1876.4688,17.1094 Q1876.4688,17.1094 1876.4688,16.5469 L1877.4844,16.4531 L1877.6406,20.5156 L1876.3125,20.6406 Q1875.5,17.0469 1872.7656,17.0469 Q1872.7656,17.0469 1872.1719,17.3281 Q1871.2656,17.6719 1870.75,18.2188 Q1869.375,19.7656 1869.3594,22.9063 Q1869.3438,25.6875 1870.875,27.25 Q1872.1719,28.5781 1873,28.5781 Q1875.0313,28.5781 1877.2188,26.0156 L1877.875,26.9531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="1894.25" y="29.894">Main</text><line style="stroke:#181818;stroke-width:0.5;" x1="1746" x2="2040" y1="39" y2="39"/><line style="stroke:#181818;stroke-width:0.5;" x1="1746" x2="2040" y1="47" y2="47"/><ellipse cx="1756" cy="62.4702" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="270" x="1765" y="67.8643">Init(lib : Library, br : BufferedReader) : void</text><ellipse cx="1756" cy="82.4106" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="40" x="1765" y="87.8047">main()</text></g><g id="elem_GMN3"><path d="M1532.5,9 L1532.5,93.0645 A0,0 0 0 0 1532.5,93.0645 L1709.5,93.0645 A0,0 0 0 0 1709.5,93.0645 L1709.5,55 L1744.8,51 L1709.5,47 L1709.5,19 L1699.5,9 L1532.5,9 A0,0 0 0 0 1532.5,9 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1699.5,9 L1699.5,19 L1709.5,19 L1699.5,9 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="1538.5" y="29.6597">處理初始化</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="1538.5" y="48.1758">獲取Library</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="1538.5" y="66.6919">進入主迴圈等待輸入</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="1538.5" y="85.208">調用Library的方法處理指令</text></g><!--MD5=[029aea2d907962ad142cfa09b4a60e92]
reverse link Command to ConfirmDecorator--><g id="link_Command_ConfirmDecorator"><path d="M1862.89,1197.8 C1825.68,1209.88 1788.48,1214.82 1751.27,1212.61 " fill="none" id="Command-backto-ConfirmDecorator" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="1860.56,1191.2,1881.74,1191.07,1865.26,1204.39,1860.56,1191.2" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[0908adc5e162635b85ba9c9c40af8dd5]
reverse link ConfirmDecorator to Command--><g id="link_ConfirmDecorator_Command"><path codeLine="193" d="M1764.27,1045.91 C1803.43,1045.34 1842.59,1052.68 1881.74,1067.93 " fill="none" id="ConfirmDecorator-backto-Command" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1751.27,1046.39,1757.4112,1050.1697,1763.2621,1045.9546,1757.1209,1042.175,1751.27,1046.39" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[56a003bb43dfa87f85c602633c665e4f]
reverse link Command to AddBook--><g id="link_Command_AddBook"><path d="M1872.27,1200.48 C1839.89,1216.7 1803.99,1231.86 1769,1241 C1199.49,1389.7 1022.6,1182.74 446,1301 C440.08,1302.21 434.1,1303.56 428.11,1305.03 " fill="none" id="Command-backto-AddBook" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="1869.39,1194.09,1890.37,1191.12,1875.82,1206.52,1869.39,1194.09" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[092fecbe1a3031521660fc7c290d21cb]
reverse link Command to RemoveBook--><g id="link_Command_RemoveBook"><path d="M1871.4,1200.31 C1839.21,1216.39 1803.63,1231.54 1769,1241 C1389.98,1344.55 1270.98,1217.71 887,1301 C881.09,1302.28 875.13,1303.69 869.14,1305.21 " fill="none" id="Command-backto-RemoveBook" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="1868.43,1193.97,1889.41,1191.04,1874.83,1206.42,1868.43,1193.97" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[686a300aec1b8f9026ed65d5650a889e]
reverse link Command to Checkout--><g id="link_Command_Checkout"><path d="M1867.84,1200.28 C1836.49,1215.83 1802.19,1230.72 1769,1241 C1580.05,1299.52 1519.79,1252.59 1328,1301 C1322.14,1302.48 1316.22,1304.06 1310.27,1305.74 " fill="none" id="Command-backto-Checkout" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="1864.93,1193.91,1885.93,1191.09,1871.27,1206.39,1864.93,1193.91" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[36daac58cad8cefd21ff98651a2edd48]
reverse link Command to Return--><g id="link_Command_Return"><path d="M1866.15,1201.12 C1812.28,1232.08 1748.67,1268.65 1692.54,1300.92 " fill="none" id="Command-backto-Return" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="1862.82,1194.96,1883.65,1191.06,1869.8,1207.09,1862.82,1194.96" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[c43aafe1fe521beadcf1e78300d33df3]
reverse link Command to ListAuthor--><g id="link_Command_ListAuthor"><path d="M1989,1211.28 C1989,1239.85 1989,1272.01 1989,1300.78 " fill="none" id="Command-backto-ListAuthor" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="1982,1211.22,1989,1191.22,1996,1211.22,1982,1211.22" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[574921adfb35e7c7a5c65fadb1c4aff0]
reverse link Command to ListSubject--><g id="link_Command_ListSubject"><path d="M2111.85,1201.12 C2165.72,1232.08 2229.33,1268.65 2285.46,1300.92 " fill="none" id="Command-backto-ListSubject" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="2108.2,1207.09,2094.35,1191.06,2115.18,1194.96,2108.2,1207.09" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[98cf1dfa96ebe5fd09d606d71ff897e0]
reverse link Command to FindChecked--><g id="link_Command_FindChecked"><path d="M2110.74,1200.28 C2142.23,1215.82 2176.68,1230.71 2210,1241 C2399,1299.35 2459.25,1252.45 2651,1301 C2656.54,1302.4 2662.13,1303.9 2667.75,1305.48 " fill="none" id="Command-backto-FindChecked" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="2107.25,1206.36,2092.57,1191.08,2113.57,1193.86,2107.25,1206.36" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[b84adcd0690ee3782988c980f1f7cb31]
reverse link Command to FindBorrower--><g id="link_Command_FindBorrower"><path d="M2107.17,1200.31 C2139.5,1216.39 2175.24,1231.54 2210,1241 C2589.11,1344.2 2708.09,1217.43 3092,1301 C3097.58,1302.22 3103.22,1303.55 3108.87,1304.98 " fill="none" id="Command-backto-FindBorrower" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="2103.68,1206.39,2089.07,1191.04,2110.06,1193.93,2103.68,1206.39" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[ab7b574a3a1d0691ed7a3f9317afd726]
reverse link RuntimeException to BookCheckoutException--><g id="link_RuntimeException_BookCheckoutException"><path d="M3920.27,830.8 C3911.4,874.99 3892.45,931.66 3852,964 C3833.05,979.15 3818.65,959.26 3798,972 C3750.79,1001.11 3718.37,1058.84 3701.52,1095.46 " fill="none" id="RuntimeException-backto-BookCheckoutException" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="3913.41,829.37,3923.76,810.88,3927.2,831.79,3913.41,829.37" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[75a3b623e2d245106781fb1e4840c83a]
reverse link RuntimeException to ExceedLimitationException--><g id="link_RuntimeException_ExceedLimitationException"><path d="M3928,831.03 C3928,908.21 3928,1035.5 3928,1095.4 " fill="none" id="RuntimeException-backto-ExceedLimitationException" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="3921,830.69,3928,810.69,3935,830.69,3921,830.69" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[ee1f2227c33b295cbd65d3439419738b]
reverse link RuntimeException to PermissionDeniedException--><g id="link_RuntimeException_PermissionDeniedException"><path d="M3970.11,827.11 C4024.3,903.84 4116.59,1034.48 4159.62,1095.4 " fill="none" id="RuntimeException-backto-PermissionDeniedException" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="3964.33,831.06,3958.51,810.69,3975.76,822.98,3964.33,831.06" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[893c7d6e870a581cd20ac13409b832e7]
link Main to Library--><g id="link_Main_Library"><path codeLine="184" d="M1893,95.07 C1893,111.77 1893,131.78 1893,152.2 " fill="none" id="Main-to-Library" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="1893,157.4,1897,148.4,1893,152.4,1889,148.4,1893,157.4" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[187e909d4fc8d66ba050c72f74cfff88]
link Library to Command--><g id="link_Library_Command"><path codeLine="185" d="M1992.38,384.75 C2004.94,404.37 2015.87,425.44 2023,447 C2095.45,666.03 2037.99,946.22 2006.35,1067.75 " fill="none" id="Library-Command" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[0c91947a02ff16505adf8819081274fd]
link Library to Book--><g id="link_Library_Book"><path codeLine="186" d="M2111.5893,384.233 C2111.5893,384.233 2116.2,386.23 2118,387 C2315.82,471.72 2411.27,407.35 2575,547 C2587.23,557.43 2598.4,569.46 2608.56,582.4 " fill="none" id="Library-Book" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="2616.49,592.95,2614.2837,583.3515,2613.4874,588.952,2607.8868,588.1557,2616.49,592.95" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2613.4874" x2="2608.685" y1="588.952" y2="582.56"/><polygon fill="#181818" points="2100.61,379.39,2104.4853,385.4713,2111.5893,384.233,2107.714,378.1517,2100.61,379.39" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[8ed45e8699312220071e4129e7985036]
link Library to User--><g id="link_Library_User"><path codeLine="187" d="M2036.1213,392.959 C2036.1213,392.959 2070.51,428.87 2085,447 C2130.51,503.94 2171.54,573.74 2202.99,633.46 " fill="none" id="Library-User" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="2209.16,645.26,2208.5291,635.4314,2206.8408,640.8304,2201.4417,639.1421,2209.16,645.26" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2206.8408" x2="2203.14" y1="640.8304" y2="633.74"/><polygon fill="#181818" points="2027.59,384.52,2029.0427,391.5833,2036.1213,392.959,2034.6687,385.8957,2027.59,384.52" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[2e64b6e1bbe3477224428ebf341f592e]
link Library to CommandFactory--><g id="link_Library_CommandFactory"><path codeLine="188" d="M1870.28,384.52 C1866.11,405.17 1862.03,425.36 1858.71,441.82 " fill="none" id="Library-to-CommandFactory" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="1857.7,446.81,1863.3964,438.7756,1858.6861,441.9082,1855.5535,437.1979,1857.7,446.81" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[781f6311ba818f462d68121dceb700c0]
link CommandFactory to Command--><g id="link_CommandFactory_Command"><path codeLine="189" d="M1858.13,515.4 C1879.91,617.45 1945.88,926.48 1974.96,1062.75 " fill="none" id="CommandFactory-to-Command" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="1976.07,1067.92,1978.1089,1058.2845,1975.0292,1063.0295,1970.2841,1059.9498,1976.07,1067.92" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[89a62da2735d54243defda06c2c07ac3]
link User to Permission--><g id="link_User_Permission"><path codeLine="190" d="M2432.22,766.5 C2432.22,766.5 2438.76,766.5 2441.42,766.5 " fill="none" id="User-Permission" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="2454.73,766.5,2445.73,762.5,2449.73,766.5,2445.73,770.5,2454.73,766.5" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2449.73" x2="2441.73" y1="766.5" y2="766.5"/><polygon fill="#181818" points="2420.22,766.5,2426.22,770.5,2432.22,766.5,2426.22,762.5,2420.22,766.5" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[5132d5e23871473e4defb8014b86c5d6]
link User to Command--><g id="link_User_Command"><path codeLine="191" d="M2173.76,887.71 C2128.76,946.36 2076.39,1014.61 2038.92,1063.44 " fill="none" id="User-to-Command" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="2035.8,1067.51,2044.4489,1062.7987,2038.841,1063.541,2038.0986,1057.9331,2035.8,1067.51" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[be39ce2064bfdd79375a20307ffb9321]
link User to exception--><g id="link_User_exception"><path codeLine="192" d="M2319.15,645.37 C2349.05,596.87 2392.11,550.83 2449.67,544.33 C2468.91,542.16 2779.09,542.16 2798.33,544.33 C2971.705,563.895 3159.9875,617.3225 3307.2838,666.8788 C3380.9319,691.6569 3444.3334,715.4672 3490.5017,733.593 C3513.5859,742.6559 3532.3617,750.2976 3545.9558,755.9287 C3552.7529,758.7442 3558.2546,761.057 3562.3517,762.7935 " fill="none" id="User-exception" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[20859897a96248c777cbbc5039f69ddb]
link Command to CommandPermissionLevel--><g id="link_Command_CommandPermissionLevel"><path codeLine="194" d="M2192.33,1129.5 C2202.26,1129.5 2212.19,1129.5 2222.12,1129.5 " fill="none" id="Command-to-CommandPermissionLevel" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="2227.31,1129.5,2218.31,1125.5,2222.31,1129.5,2218.31,1133.5,2227.31,1129.5" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[c4f1b96a8701437ddc24c30e981f88ca]
@startuml
class Main{
    +{static}Init(lib : Library, br : BufferedReader) : void
    +{static}main()
}
note left of Main : 處理初始化\n獲取Library\n進入主迴圈等待輸入\n調用Library的方法處理指令

package controller #DDDDDD{
    class Library{
        +users : HashMap<String, User>
        +books : LinkedHashMap<Integer, Book>
        +commandErrorList : HashMap<String,String>
        {static}-instance : Library
        +br : BufferedReader

        {method}<<Singleton>>
        -Library()
        {static}+getInstance() : Library
        +processTransaction(cmdStr : String, br : BufferedReader) : int
    }
    note left of Library : 透過Map可利用鍵快速查找元素\nLinkedHashMap有可預知的迭代順序\n解決列出書要照ID排的問題
    note bottom of Library : processTransaction方法用來\n拆分輸入的指令，呼叫工廠構造指令類\n並使用設計好的命令模式執行指令
    note right of Library : 關於processTransaction函數\nAnalyze a single command,\nwhere the supported command format is\n\n[invoker] command [...parameters].\n\nTherefore, the standard processing can be applied uniformly.\nIf the invoker has the permission to execute the command,\nthe command execution is handled by the invoking class.\n\n@param cmdStr : a single line instruction which the type is String\n@return  0 if run successfully, -1 if parsing failed.

    class CommandFactory{
        +{static}createCommand(cmdStr : String) : Command
    }
}

package object{
    enum Permission{
        Borrower,Staff
    }
    class User<<Invoker>>{
        -userName : String
        -userType : Permission
        -predefinedBorrowBookNumber : Integer
        -cmd : Command
        +getUserName() : String
        +getPreDefinedBorrowBookNumber() : Integer
        +setPreDefinedBorrowBookNumber() : void
        +setCommand(cmd : Command) : void
        +invoke() : void
    }


    class Book{
        -bookID : Integer
        -bookAuthor : String
        -bookSubject : String
        -borrowed : boolean
        -borrowedBy : User

        +getBookID() : Integer
        +getAuthor() : String
        +getSubject() : String
        +isBorrowed() : boolean
        +getBorrowedBy : User
        +doBorrowed() : void
        +doReturn() : void
        +equals(o : Object) : boolean
        +hashCode() : int
    }
}



package "command"{
    interface Command<< 指令接口 >>{
        execute(invoker : User, arg : String) : void
        +getCommandPermissionLevel() : CommandPermissionLevel;
        +getPermissionDeniedMsg() : String
    }
    class ConfirmDecorator << Decorator >> implements Command{
        -cmd : Command
        -msg : String

        +isStaff(user : User) : boolean
        +hasConfirm(invoker : User, arg : String) : boolean
        {method}<<Override>>
        +execute(invoker : User, arg : String) : void
        +getCommandPermissionLevel() : CommandPermissionLevel;
        +getPermissionDeniedMsg() : String
    }
    enum CommandPermissionLevel{
        Staff,Self,Borrower
    }
    class AddBook implements Command{
        p : CommandPermissionLevel
        permissionDeniedMsg : String

        {method}<<Override>>
        +execute(invoker : User, arg : String) : void
        +getCommandPermissionLevel() : CommandPermissionLevel;
        +getPermissionDeniedMsg() : String
    }

    class RemoveBook implements Command{
        p : CommandPermissionLevel
        permissionDeniedMsg : String

        {method}<<Override>>
        +execute(invoker : User, arg : String) : void
        +getCommandPermissionLevel() : CommandPermissionLevel;
        +getPermissionDeniedMsg() : String
    }

    class Checkout implements Command{
        p : CommandPermissionLevel
        permissionDeniedMsg : String

        {method}<<Override>>
        +execute(invoker : User, arg : String) : void
        +getCommandPermissionLevel() : CommandPermissionLevel;
        +getPermissionDeniedMsg() : String
    }

    class Return implements Command{
        p : CommandPermissionLevel
        permissionDeniedMsg : String

        {method}<<Override>>
        +execute(invoker : User, arg : String) : void
        +getCommandPermissionLevel() : CommandPermissionLevel;
        +getPermissionDeniedMsg() : String
    }

    class ListAuthor implements Command{
        p : CommandPermissionLevel
        permissionDeniedMsg : String

        {method}<<Override>>
        +execute(invoker : User, arg : String) : void
        +getCommandPermissionLevel() : CommandPermissionLevel;
        +getPermissionDeniedMsg() : String
    }

    class ListSubject implements Command{
        p : CommandPermissionLevel
        permissionDeniedMsg : String

        {method}<<Override>>
        +execute(invoker : User, arg : String) : void
        +getCommandPermissionLevel() : CommandPermissionLevel;
        +getPermissionDeniedMsg() : String
    }

    class FindChecked implements Command{
        p : CommandPermissionLevel
        permissionDeniedMsg : String

        {method}<<Override>>
        +execute(invoker : User, arg : String) : void
        +getCommandPermissionLevel() : CommandPermissionLevel;
        +getPermissionDeniedMsg() : String
    }

    class FindBorrower implements Command{
        p : CommandPermissionLevel
        permissionDeniedMsg : String

        {method}<<Override>>
        +execute(invoker : User, arg : String) : void
        +getCommandPermissionLevel() : CommandPermissionLevel;
        +getPermissionDeniedMsg() : String
    }
}

package exception #FFFFFF{
    Exception RuntimeException{
        <<運行期異常類>>
        {method}<<在Java lang包中>>
    }
    Exception BookCheckoutException extends RuntimeException{
        <<借書/還書異常時被拋出>>
    }
    Exception ExceedLimitationException extends RuntimeException{
        <<Borrower借書超過數量時被拋出>>
    }
    Exception PermissionDeniedException extends RuntimeException{
        <<Invoker無權執行指令時被拋出>>
    }
}

Main ..> Library
Library - - Command
Library *- - -> Book
Library *- - -> User
Library ..> CommandFactory
CommandFactory ..> Command
User *-> Permission
User ..> Command
User - exception
ConfirmDecorator o- Command
Command -> CommandPermissionLevel
@enduml

PlantUML version 1.2022.7(Tue Aug 23 01:01:30 GMT+08:00 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: MS950
Language: zh
Country: TW
--></g></svg>